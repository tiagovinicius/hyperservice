stack: "backend"
type: "application"
language: "go"
tasks:
  build:
    script: |
      TARGET_OS=${TARGET_OS:-linux}
      TARGET_ARCH=${TARGET_ARCH:-amd64}
      VERSION=$(cat version.txt)
      GOOS=$TARGET_OS GOARCH=$TARGET_ARCH go build -o "./bin/$TARGET_OS-$TARGET_ARCH" ./ -ldflags "-X main.version=$VERSION($TARGET_OS/$TARGET_ARCH)"